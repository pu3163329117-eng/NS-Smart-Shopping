# åç«¯å¼€å‘ä¸æ•°æ®åº“è¿ç§»æ–¹æ¡ˆ

æ²¡é”™ï¼Œåˆšæ‰æˆ‘ä»¬ä¸ºäº†å¿«é€ŸéªŒè¯å‰ç«¯äº¤äº’ï¼Œä½¿ç”¨çš„æ˜¯ LocalStorage Mock æ–¹æ¡ˆã€‚ç°åœ¨æ—¢ç„¶å‰ç«¯é—­ç¯å·²è·‘é€šï¼Œæ˜¯æ—¶å€™æ­å»º**çœŸå®çš„åç«¯æ¶æ„**äº†ã€‚

## ğŸ—ï¸ æ¶æ„é€‰æ‹©
æˆ‘ä»¬å°†é‡‡ç”¨ç»å…¸çš„ **Node.js + Express + PostgreSQL** æŠ€æœ¯æ ˆï¼Œè¿™ä¹Ÿæ˜¯ä½ åœ¨ PRD ä¸­æåˆ°çš„æ–¹å‘ã€‚

### 1. ç›®å½•ç»“æ„ (`smart-ja-backend`)
æˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªç‹¬ç«‹çš„åç«¯é¡¹ç›®ï¼Œä¸ `smart-ja-web` å¹¶åˆ—ï¼š
```
smart-ja-backend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ config/         # æ•°æ®åº“è¿æ¥é…ç½®
â”‚   â”œâ”€â”€ controllers/    # ä¸šåŠ¡é€»è¾‘ (UserController, ServiceController, OrderController)
â”‚   â”œâ”€â”€ models/         # Sequelize æ¨¡å‹å®šä¹‰
â”‚   â”œâ”€â”€ routes/         # API è·¯ç”±å®šä¹‰
â”‚   â”œâ”€â”€ middlewares/    # é‰´æƒä¸­é—´ä»¶ (JWT)
â”‚   â””â”€â”€ app.js          # å…¥å£æ–‡ä»¶
â”œâ”€â”€ .env                # ç¯å¢ƒå˜é‡ (DB_URL, JWT_SECRET)
â””â”€â”€ package.json
```

### 2. æ•°æ®åº“è®¾è®¡ (PostgreSQL)

æˆ‘ä»¬å°†è®¾è®¡ä»¥ä¸‹æ ¸å¿ƒè¡¨ï¼š

*   **Users (ç”¨æˆ·è¡¨)**
    *   `id` (UUID)
    *   `username`, `password_hash`, `email`
    *   `role` ('student', 'maker', 'admin')
    *   `balance` (Decimal)
    *   `maker_profile` (JSONB) - å­˜å‚¨åˆ›å®¢ç­‰çº§ã€ç»éªŒå€¼ã€å¾½ç« 

*   **Services (æœåŠ¡è¡¨)**
    *   `id` (UUID)
    *   `provider_id` (FK -> Users.id)
    *   `title`, `description`, `price`
    *   `type` ('course', '3d_print', 'custom')
    *   `status` ('active', 'pending', 'offline')
    *   `images` (Array)

*   **Orders (è®¢å•è¡¨)**
    *   `id` (UUID)
    *   `buyer_id` (FK -> Users.id)
    *   `service_id` (FK -> Services.id)
    *   `status` ('paid', 'processing', 'completed', 'cancelled')
    *   `amount` (Decimal)
    *   `created_at`, `updated_at`

### 3. API æ¥å£è§„åˆ’

æˆ‘ä»¬å°†å®ç° RESTful API ä¾›å‰ç«¯è°ƒç”¨ï¼š

*   `POST /api/auth/login` - ç™»å½•
*   `POST /api/auth/register` - æ³¨å†Œ
*   `GET /api/services` - è·å–æœåŠ¡åˆ—è¡¨
*   `POST /api/services` - å‘å¸ƒæ–°æœåŠ¡ (Maker)
*   `POST /api/orders` - åˆ›å»ºè®¢å• (Student)
*   `GET /api/orders/maker` - è·å–åˆ›å®¢è®¢å• (Maker)

## ğŸ“… æ‰§è¡Œæ­¥éª¤

1.  **åˆå§‹åŒ–åç«¯é¡¹ç›®**: åˆ›å»º `smart-ja-backend` æ–‡ä»¶å¤¹ï¼Œå®‰è£… Express, Sequelize, pg ç­‰ä¾èµ–ã€‚
2.  **é…ç½®æ•°æ®åº“**: ç¼–å†™ `docker-compose.yml` å¯åŠ¨ PostgreSQL å®¹å™¨ï¼ˆå¦‚æœä½ æœ¬åœ°æ²¡æœ‰å®‰è£… PGï¼‰ã€‚
3.  **ç¼–å†™æ¨¡å‹ä¸è¿ç§»**: å®šä¹‰ User, Service, Order æ¨¡å‹å¹¶åŒæ­¥åˆ°æ•°æ®åº“ã€‚
4.  **å®ç°æ ¸å¿ƒ API**: å…ˆé€š `Auth` å’Œ `Service` æ¨¡å—ã€‚
5.  **å‰ç«¯è”è°ƒ**: ä¿®æ”¹å‰ç«¯ `src/services/api.js`ï¼Œå°† Mock è°ƒç”¨æ›¿æ¢ä¸ºçœŸå® Axios è¯·æ±‚ã€‚

**ä½ ç°åœ¨çš„ç¯å¢ƒé‡Œå®‰è£…äº† PostgreSQL å—ï¼Ÿå¦‚æœæ²¡æœ‰ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ Docker å¿«é€Ÿèµ·ä¸€ä¸ªï¼Œæˆ–è€…ä½¿ç”¨ SQLite ä½œä¸ºå¼€å‘é˜¶æ®µçš„æ›¿ä»£æ–¹æ¡ˆï¼ˆä¸ç”¨å®‰è£…ä»»ä½•ä¸œè¥¿ï¼‰ã€‚ä½ å€¾å‘äºå“ªç§ï¼Ÿ**